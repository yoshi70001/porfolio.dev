<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome file</title>
    <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
    <div class="stackedit__html">

        <h1 id="‚öôÔ∏è-conexi√≥n-a-netsuite-con-oauth-2.0-flujo-m2m-client-credentials-ü§ñ">‚öôÔ∏è Conexi√≥n a NetSuite con OAuth
            2.0:
            Flujo M2M (Client Credentials) ü§ñ</h1>
        <p>El flujo de ‚ÄúClient Credentials‚Äù (Credenciales de Cliente) es un tipo de concesi√≥n de OAuth 2.0 que permite a
            una
            aplicaci√≥n (el ‚Äúcliente‚Äù) obtener un token de acceso directamente, utilizando sus propias credenciales, sin
            la
            intervenci√≥n de un usuario. Es com√∫nmente usado para comunicaciones m√°quina a m√°quina (M2M).</p>
        <h2 id="üìú-flujo-general-de-client-credentials-m2m">üìú Flujo General de Client Credentials (M2M)</h2>
        <ol>
            <li><strong>Tu Aplicaci√≥n Servidor</strong> ‚û°Ô∏è Env√≠a sus <code>Client ID</code> y <code>Client Secret</code>
                a
                <strong>NetSuite</strong>.
            </li>
            <li><strong>NetSuite</strong> ‚úÖ Valida las credenciales de la aplicaci√≥n.</li>
            <li><strong>NetSuite</strong> ‚û°Ô∏è Emite un <code>token de acceso</code> directamente a <strong>Tu Aplicaci√≥n
                    Servidor</strong>.</li>
            <li><strong>Tu Aplicaci√≥n Servidor</strong> üîë Usa el <code>token de acceso</code> para realizar llamadas
                API a
                <strong>NetSuite</strong>.
            </li>
        </ol>
        <hr>
        <h2 id="üõ†Ô∏è-paso-1-configuraci√≥n-en-netsuite-lado-del-servidor-1">üõ†Ô∏è Paso 1: Configuraci√≥n en NetSuite (Lado
            del
            Servidor)</h2>
        <p>Necesitar√°s permisos de administrador en NetSuite.</p>
        <ol>
            <li>
                <p><strong>Habilitar Caracter√≠sticas:</strong></p>
                <ul>
                    <li>Ve a <code>Setup &gt; Company &gt; Enable Features</code>.</li>
                    <li>En la pesta√±a <code>SuiteCloud</code>, aseg√∫rate de que las siguientes caracter√≠sticas est√©n
                        habilitadas:
                        <ul>
                            <li><code>SERVER SUITESCRIPT</code> (si planeas usar SuiteScript)</li>
                            <li><code>CLIENT SUITESCRIPT</code> (si planeas usar SuiteScript)</li>
                            <li><code>SUITETALK (WEB SERVICES)</code></li>
                            <li><code>OAUTH 2.0</code></li>
                        </ul>
                    </li>
                    <li>Guarda los cambios.</li>
                </ul>
            </li>
            <li>
                <p><strong>Crear un Registro de Integraci√≥n:</strong></p>
                <ul>
                    <li>Ve a <code>Setup &gt; Integration &gt; Manage Integrations &gt; New</code>.</li>
                    <li><strong>Nombre:</strong> Dale un nombre descriptivo a tu integraci√≥n (ej: ‚ÄúMi Servidor M2M
                        OAuth2‚Äù).</li>
                    <li><strong>Estado:</strong> <code>Enabled</code>.</li>
                    <li><strong>Nota (Opcional):</strong> Descripci√≥n de la integraci√≥n.</li>
                    <li>En la pesta√±a <code>Authentication</code>:
                        <ul>
                            <li>Marca la casilla <code>OAUTH 2.0</code>.</li>
                            <li><strong>Grant Type:</strong> Selecciona
                                <code>CLIENT CREDENTIALS (MACHINE TO MACHINE)</code>.
                            </li>
                            <li><strong>REDIRECT URI(s):</strong> <strong>NO ES NECESARIO</strong> para el flujo Client
                                Credentials.
                                Puedes dejarlo en blanco o NetSuite podr√≠a no mostrar este campo para este grant type.
                            </li>
                            <li><strong>OAUTH 2.0 SCOPES:</strong> Selecciona los permisos necesarios para tu aplicaci√≥n
                                (ej:
                                <code>REST WEB SERVICES</code>, <code>TRANSACTIONS</code>, etc.). Estos scopes definir√°n
                                qu√© puede hacer
                                la aplicaci√≥n.
                            </li>
                        </ul>
                    </li>
                    <li>Guarda el registro de integraci√≥n.</li>
                </ul>
            </li>
            <li>
                <p><strong>Obtener Credenciales:</strong></p>
                <ul>
                    <li>Una vez guardado, NetSuite mostrar√° el <code>CLIENT ID</code> y <code>CLIENT SECRET</code>.</li>
                    <li><strong>¬°IMPORTANTE!</strong> Copia y guarda de forma segura el <code>Client ID</code> y
                        <code>Client Secret</code>. El <code>Client Secret</code> no se mostrar√° de nuevo.
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>Asociar la Integraci√≥n con un Rol (¬°Crucial para M2M!):</strong></p>
                <ul>
                    <li>Dado que no hay un usuario que inicie sesi√≥n, los permisos de la integraci√≥n M2M se derivan de
                        un
                        <strong>Rol</strong> espec√≠fico en NetSuite.
                    </li>
                    <li>Edita el registro de integraci√≥n que acabas de crear.</li>
                    <li>En la subpesta√±a <code>OAuth 2.0</code> (o donde NetSuite lo ubique para M2M), deber√≠as
                        encontrar una
                        secci√≥n para <strong>especificar el Rol</strong> cuyas credenciales ser√°n utilizadas por esta
                        integraci√≥n.
                        <ul>
                            <li><em>Nota: La interfaz exacta puede variar ligeramente. La clave es que el sistema
                                    necesita saber qu√©
                                    conjunto de permisos usar.</em></li>
                            <li>Usualmente, se crea un rol espec√≠fico para la integraci√≥n con los permisos m√≠nimos
                                necesarios.</li>
                        </ul>
                    </li>
                    <li>Aseg√∫rate de que el Rol seleccionado tenga los permisos adecuados para las operaciones API que
                        la
                        aplicaci√≥n realizar√° (ej: crear, leer, actualizar, eliminar registros espec√≠ficos, ejecutar
                        b√∫squedas
                        guardadas, etc.).</li>
                </ul>
            </li>
        </ol>
        <hr>
        <h2 id="‚öôÔ∏è-paso-2-obtener-el-token-de-acceso-desde-tu-aplicaci√≥n-servidor">‚öôÔ∏è Paso 2: Obtener el Token de Acceso
            (Desde tu Aplicaci√≥n Servidor)</h2>
        <p>Tu aplicaci√≥n servidor ahora solicitar√° directamente un token de acceso a NetSuite.</p>
        <ul>
            <li>
                <p><strong>URL del Token:</strong>
                    <code>https://&lt;ACCOUNT_ID&gt;.suitetalk.api.netsuite.com/services/rest/auth/oauth2/v1/token</code>
                </p>
                <ul>
                    <li>Reemplaza <code>&lt;ACCOUNT_ID&gt;</code> con tu ID de cuenta de NetSuite (ej:
                        <code>1234567</code> o
                        <code>1234567_SB1</code> para sandbox).
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>M√©todo:</strong> <code>POST</code></p>
            </li>
            <li>
                <p><strong>Headers:</strong></p>
                <ul>
                    <li><code>Content-Type: application/x-www-form-urlencoded</code></li>
                    <li><code>Authorization: Basic &lt;BASE64_ENCODED_CLIENT_ID:CLIENT_SECRET&gt;</code>
                        <ul>
                            <li>Donde <code>&lt;BASE64_ENCODED_CLIENT_ID:CLIENT_SECRET&gt;</code> es la cadena
                                <code>CLIENT_ID:CLIENT_SECRET</code> codificada en Base64. (Ej:
                                <code>YWJjZGVmMTIzNDU6c2VjcmV0eHl6Nzg5</code>)
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>Cuerpo de la Petici√≥n (form-urlencoded):</strong></p>
                <ul>
                    <li><code>grant_type=client_credentials</code></li>
                    <li><code>scope=&lt;LISTA_DE_SCOPES_SEPARADOS_POR_ESPACIO&gt;</code>
                        <ul>
                            <li>Estos deben ser un subconjunto (o todos) los scopes que configuraste en el registro de
                                integraci√≥n.
                                NetSuite los validar√°. (Ej: <code>rest_webservices transactions</code>)</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <p><strong>Ejemplo de Petici√≥n (usando cURL):</strong></p>
        <pre class=" language-bash"><code class="prism  language-bash">curl -X POST \
  <span class="token string">'https://1234567.suitetalk.api.netsuite.com/services/rest/auth/oauth2/v1/token'</span> \
  -H <span class="token string">'Content-Type: application/x-www-form-urlencoded'</span> \
  -H <span class="token string">'Authorization: Basic YWJjZGVmMTIzNDU6c2VjcmV0eHl6Nzg5'</span> \
  -d <span class="token string">'grant_type=client_credentials&amp;scope=rest_webservices%20transactions'</span>
</code></pre>
        <p><strong>Respuesta Exitosa (JSON):</strong></p>
        <pre class=" language-bash"><code class="prism  language-bash"><span class="token punctuation">{</span>
  <span class="token string">"access_token"</span><span class="token keyword">:</span> <span class="token string">"an_m2m_access_token_string"</span>,
  <span class="token string">"expires_in"</span><span class="token keyword">:</span> 3600, // Segundos hasta que el access_token expire <span class="token punctuation">(</span>generalmente 1 hora<span class="token punctuation">)</span>
  <span class="token string">"token_type"</span><span class="token keyword">:</span> <span class="token string">"Bearer"</span>
  // Nota: Generalmente NO se devuelve un refresh_token en el flujo Client Credentials.
<span class="token punctuation">}</span>
</code></pre>
        <p><strong>¬°IMPORTANTE!</strong> Almacena de forma segura el access_token. Cuando expire, tu aplicaci√≥n
            necesitar√°
            solicitar uno nuevo repitiendo este Paso 2.</p>
        <h2 id="üöÄ-paso-3-realizar-peticiones-api-a-netsuite-1">üöÄ Paso 3: Realizar Peticiones API a NetSuite</h2>
        <p>Usa el access_token obtenido para autorizar tus llamadas a la API REST de NetSuite.</p>
        <ul>
            <li>
                <p><strong>Header de Autorizaci√≥n:</strong> Authorization: Bearer &lt;ACCESS_TOKEN&gt;</p>
            </li>
            <li>
                <p><strong>Header Adicional (para REST):</strong> Prefer: transient (opcional, pero puede ayudar con la
                    concurrencia y el versionado)</p>
            </li>
        </ul>
        <p><strong>Ejemplo de Petici√≥n API (usando cURL para crear un registro de cliente):</strong></p>
        <pre class=" language-bash"><code class="prism  language-bash">curl -X POST \
  <span class="token string">'https://&lt;ACCOUNT_ID&gt;.suitetalk.api.netsuite.com/services/rest/record/v1/customer'</span> \
  -H <span class="token string">'Authorization: Bearer an_m2m_access_token_string'</span> \
  -H <span class="token string">'Content-Type: application/json'</span> \
  -H <span class="token string">'Prefer: transient'</span> \
  -d <span class="token string">'{
        "companyName": "Cliente M2M Inc.",
        "subsidiary": {"id": "1"}
      }'</span>
</code></pre>
        <p>Reemplaza &lt;ACCOUNT_ID&gt; y ajusta el cuerpo JSON seg√∫n tus necesidades.</p>
        <hr>
        <h2 id="üîÑ-paso-4-manejo-de-expiraci√≥n-del-token-de-acceso">üîÑ Paso 4: Manejo de Expiraci√≥n del Token de Acceso
        </h2>
        <p>Los access_token obtenidos mediante el flujo Client Credentials tambi√©n expiran (generalmente despu√©s de 1
            hora).
        </p>
        <ul>
            <li>
                <p><strong>No hay refresh_token:</strong> A diferencia del flujo ‚ÄúAuthorization Code‚Äù, el flujo ‚ÄúClient
                    Credentials‚Äù t√≠picamente no emite un refresh_token.</p>
            </li>
            <li>
                <p><strong>Para obtener un nuevo token:</strong> Cuando el access_token actual expire (o est√© cerca de
                    expirar),
                    tu aplicaci√≥n debe <strong>repetir el Paso 2</strong> (solicitar un nuevo token usando
                    grant_type=client_credentials y sus Client ID/Client Secret).</p>
            </li>
            <li>
                <p>Tu aplicaci√≥n debe ser capaz de detectar un error de token expirado (usualmente un HTTP 401
                    Unauthorized) y
                    solicitar uno nuevo autom√°ticamente.</p>
            </li>
        </ul>
        <hr>
        <h2 id="üí°-consideraciones-importantes-para-m2m">üí° Consideraciones Importantes para M2M</h2>
        <ul>
            <li>
                <p><strong>Seguridad del Client Secret:</strong> Es <strong>extremadamente cr√≠tico</strong> mantener el
                    Client
                    Secret seguro en tu aplicaci√≥n servidor. Si se compromete, alguien podr√≠a obtener tokens de acceso y
                    actuar en
                    nombre de tu aplicaci√≥n. Utiliza gestores de secretos o variables de entorno seguras.</p>
            </li>
            <li>
                <p><strong>Rol y Permisos:</strong> La integraci√≥n M2M opera con los permisos del Rol asociado en
                    NetSuite.
                    Aseg√∫rate de que este rol siga el principio de <strong>privilegio m√≠nimo</strong>, concediendo solo
                    los
                    permisos estrictamente necesarios para las tareas de la integraci√≥n.</p>
            </li>
            <li>
                <p><strong>Scopes:</strong> Los scopes solicitados en la petici√≥n de token deben coincidir (o ser un
                    subconjunto) de los scopes configurados en el registro de integraci√≥n en NetSuite.</p>
            </li>
            <li>
                <p><strong>Auditor√≠a:</strong> Las acciones realizadas a trav√©s de una integraci√≥n M2M se auditar√°n en
                    NetSuite
                    bajo el contexto del Rol asociado a la integraci√≥n, no de un usuario espec√≠fico.</p>
            </li>
            <li>
                <p><strong>L√≠mites de Concurrencia:</strong> S√© consciente de los l√≠mites de concurrencia de SuiteTalk.
                    Las
                    aplicaciones M2M pueden generar muchas solicitudes.</p>
            </li>
        </ul>
        <hr>
        <h2 id="üîë-conexi√≥n-m2m-con-netsuite-usando-oauth-2.0-y-jwt-assertion-clave-p√∫blicaprivada">üîë Conexi√≥n M2M con
            NetSuite usando OAuth 2.0 y JWT Assertion (Clave P√∫blica/Privada)</h2>
        <p>Este m√©todo reemplaza el uso del Client Secret en la solicitud de token por una aserci√≥n JWT firmada por la
            clave
            privada de tu aplicaci√≥n. NetSuite verifica esta aserci√≥n usando la clave p√∫blica que has registrado.</p>
        <h3 id="üìú-flujo-general-client-credentials-con-jwt-assertion">üìú Flujo General (Client Credentials con JWT
            Assertion)</h3>
        <ol>
            <li>
                <p><strong>Tu Aplicaci√≥n Servidor (Cliente)</strong>:</p>
                <ul>
                    <li>
                        <p>Genera un par de claves RSA (o similar) p√∫blica y privada.</p>
                    </li>
                    <li>
                        <p>Construye un JWT (la ‚Äúaserci√≥n‚Äù).</p>
                    </li>
                    <li>
                        <p>Firma el JWT con su <strong>clave privada</strong>.</p>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>Tu Aplicaci√≥n Servidor</strong> ‚û°Ô∏è Env√≠a una solicitud al endpoint de token de NetSuite,
                    incluyendo:
                </p>
                <ul>
                    <li>
                        <p>grant_type=client_credentials</p>
                    </li>
                    <li>
                        <p>client_id=&lt;TU_CLIENT_ID&gt;</p>
                    </li>
                    <li>
                        <p>client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer</p>
                    </li>
                    <li>
                        <p>client_assertion=&lt;EL_JWT_FIRMADO&gt;</p>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>NetSuite</strong>:</p>
                <ul>
                    <li>
                        <p>Recibe la solicitud.</p>
                    </li>
                    <li>
                        <p>Busca la <strong>clave p√∫blica</strong> asociada con el Client ID (que registraste
                            previamente).</p>
                    </li>
                    <li>
                        <p>Verifica la firma del client_assertion JWT usando esa clave p√∫blica.</p>
                    </li>
                    <li>
                        <p>Valida las ‚Äúclaims‚Äù dentro del JWT (emisor, audiencia, expiraci√≥n, etc.).</p>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>NetSuite</strong> ‚úÖ Si todo es v√°lido, emite un token de acceso a <strong>Tu Aplicaci√≥n
                        Servidor</strong>.</p>
            </li>
            <li>
                <p><strong>Tu Aplicaci√≥n Servidor</strong> üîë Usa el token de acceso para realizar llamadas API a
                    <strong>NetSuite</strong>.
                </p>
            </li>
        </ol>
        <hr>
        <h3 id="üõ†Ô∏è-paso-1-preparaci√≥n-y-configuraci√≥n">üõ†Ô∏è Paso 1: Preparaci√≥n y Configuraci√≥n</h3>
        <ol>
            <li>
                <p><strong>Generar un Par de Claves (P√∫blica y Privada):</strong></p>
                <ul>
                    <li>
                        <p>T√∫, como desarrollador de la aplicaci√≥n cliente, necesitas generar un par de claves
                            asim√©tricas (ej.
                            RSA).</p>
                    </li>
                    <li>
                        <p>Guarda la <strong>clave privada</strong> de forma MUY SEGURA en tu servidor. <strong>Nunca la
                                compartas.</strong></p>
                    </li>
                    <li>
                        <p>Necesitar√°s la <strong>clave p√∫blica</strong> en un formato que NetSuite pueda aceptar
                            (generalmente
                            PEM).</p>
                    </li>
                </ul>
                <pre><code># Ejemplo de generaci√≥n con OpenSSL (RSA 2048 bits)
openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:2048
openssl rsa -pubout -in private_key.pem -out public_key.pem
</code></pre>
            </li>
            <li>
                <p><strong>Configuraci√≥n en NetSuite (Registro de Integraci√≥n):</strong></p>
                <ul>
                    <li>
                        <p>Ve a Setup &gt; Integration &gt; Manage Integrations &gt; New (o edita una existente).</p>
                    </li>
                    <li>
                        <p><strong>Nombre:</strong> Dale un nombre descriptivo.</p>
                    </li>
                    <li>
                        <p><strong>Estado:</strong> Enabled.</p>
                    </li>
                    <li>
                        <p>En la pesta√±a Authentication:</p>
                        <ul>
                            <li>
                                <p>Marca la casilla OAUTH 2.0.</p>
                            </li>
                            <li>
                                <p><strong>Grant Type:</strong> Selecciona CLIENT CREDENTIALS (MACHINE TO MACHINE).</p>
                            </li>
                            <li>
                                <p><strong>TOKEN ENDPOINT AUTH METHOD:</strong> Aqu√≠ es donde la configuraci√≥n difiere.
                                    Deber√≠as
                                    encontrar una opci√≥n como:</p>
                                <ul>
                                    <li>PRIVATE KEY JWT o JWT Bearer Token.</li>
                                </ul>
                            </li>
                            <li>
                                <p><strong>CERTIFICATE (PUBLIC KEY):</strong> Habr√° un campo o una forma de
                                    <strong>cargar o pegar tu
                                        clave p√∫blica</strong> (el contenido del archivo public_key.pem generado en el
                                    paso anterior).
                                </p>
                                <ul>
                                    <li>NetSuite tambi√©n puede requerir que especifiques un Certificate ID o Key ID
                                        (kid) que luego
                                        incluir√°s en el encabezado del JWT que generes. Esto ayuda a NetSuite a
                                        encontrar la clave correcta
                                        si tienes varias registradas para un mismo Client ID.</li>
                                </ul>
                            </li>
                            <li>
                                <p><strong>OAUTH 2.0 SCOPES:</strong> Selecciona los permisos necesarios.</p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>Guarda el registro de integraci√≥n.</p>
                    </li>
                    <li>
                        <p>NetSuite te proporcionar√° un CLIENT ID. <strong>NO habr√° un Client Secret emitido por
                                NetSuite para este
                                m√©todo de autenticaci√≥n de cliente.</strong></p>
                    </li>
                </ul>
            </li>
            <li>
                <p><strong>Asociar la Integraci√≥n con un Rol:</strong></p>
                <ul>
                    <li>Al igual que con el flujo Client Credentials est√°ndar, los permisos se derivan de un Rol
                        espec√≠fico en
                        NetSuite asociado a esta integraci√≥n.</li>
                </ul>
            </li>
        </ol>
        <hr>
        <h3 id="‚öôÔ∏è-paso-2-construir-y-firmar-el-jwt-en-tu-aplicaci√≥n-cliente">‚öôÔ∏è Paso 2: Construir y Firmar el JWT (en
            tu
            Aplicaci√≥n Cliente)</h3>
        <p>Cuando tu aplicaci√≥n necesite un token de acceso, debe construir un JWT con las siguientes ‚Äúclaims‚Äù (campos)
            m√≠nimos:</p>
        <ul>
            <li>
                <p>iss (Issuer): Tu CLIENT ID (el emisor del JWT es tu aplicaci√≥n).</p>
            </li>
            <li>
                <p>sub (Subject): Tu CLIENT ID (el sujeto del JWT es tu aplicaci√≥n).</p>
            </li>
            <li>
                <p>aud (Audience): La URL del endpoint de token de NetSuite.</p>
                <ul>
                    <li>Ej: https://&lt;ACCOUNT_ID&gt;.suitetalk.api.netsuite.com/services/rest/auth/oauth2/v1/token
                    </li>
                </ul>
            </li>
            <li>
                <p>exp (Expiration Time): Fecha de expiraci√≥n del JWT (corta duraci√≥n, ej. 5 minutos desde ahora).
                    Formato Unix
                    timestamp.</p>
            </li>
            <li>
                <p>jti (JWT ID): Un identificador √∫nico para este JWT, para prevenir ataques de repetici√≥n.</p>
            </li>
        </ul>
        <p>Este JWT luego se <strong>firma usando tu clave privada</strong>. La librer√≠a que uses para JWT (ej.
            jsonwebtoken
            en Node.js, PyJWT en Python, etc.) se encargar√° de esto.</p>
        <hr>
        <h3 id="‚öôÔ∏è-paso-3-solicitar-el-token-de-acceso">‚öôÔ∏è Paso 3: Solicitar el Token de Acceso</h3>
        <p>Tu aplicaci√≥n servidor ahora solicita el token de acceso a NetSuite:</p>
        <ul>
            <li>
                <p><strong>URL del Token:</strong>
                    https://&lt;ACCOUNT_ID&gt;.suitetalk.api.netsuite.com/services/rest/auth/oauth2/v1/token</p>
            </li>
            <li>
                <p><strong>M√©todo:</strong> POST</p>
            </li>
            <li>
                <p><strong>Headers:</strong></p>
                <ul>
                    <li>Content-Type: application/x-www-form-urlencoded</li>
                </ul>
            </li>
            <li>
                <p><strong>Cuerpo de la Petici√≥n (form-urlencoded):</strong></p>
                <ul>
                    <li>
                        <p>grant_type=client_credentials</p>
                    </li>
                    <li>
                        <p>client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer</p>
                    </li>
                    <li>
                        <p>client_assertion=&lt;EL_JWT_FIRMADO_EN_EL_PASO_ANTERIOR&gt;</p>
                    </li>
                    <li>
                        <p>scope=&lt;LISTA_DE_SCOPES_SEPARADOS_POR_ESPACIO&gt; (opcional si los scopes ya est√°n
                            definidos
                            completamente en la integraci√≥n, pero buena pr√°ctica incluirlo).</p>
                    </li>
                </ul>
            </li>
        </ul>
        <p><strong>Ejemplo de Petici√≥n (conceptual):</strong></p>
        <pre class=" language-http"><code class="prism  language-http">POST /services/rest/auth/oauth2/v1/token HTTP/1.1
<span class="token header-name keyword">Host:</span> &lt;ACCOUNT_ID&gt;.suitetalk.api.netsuite.com
<span class="token header-name keyword">Content-Type:</span> application/x-www-form-urlencoded

grant_type=client_credentials
&amp;client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer
&amp;client_assertion=eyJhbGciOiJSUzI1NiIsImtpZCI6InNvbWUtcHVibGljLWtleS1pZCJ9.eyJpc3MiOiJYOUR_CLIENT_ID_HERE_AS_ISSUER_AND_SUBJECT...
&amp;scope=rest_webservices%20transactions
</code></pre>
        <p><strong>Respuesta Exitosa (JSON):</strong><br>
            Id√©ntica a la del flujo Client Credentials est√°ndar:</p>
        <pre class=" language-bash"><code class="prism  language-bash"><span class="token punctuation">{</span>
  <span class="token string">"access_token"</span><span class="token keyword">:</span> <span class="token string">"an_m2m_access_token_string"</span>,
  <span class="token string">"expires_in"</span><span class="token keyword">:</span> 3600,
  <span class="token string">"token_type"</span><span class="token keyword">:</span> <span class="token string">"Bearer"</span>
<span class="token punctuation">}</span>
</code></pre>
        <h3 id="üöÄ-pasos-siguientes">üöÄ Pasos Siguientes</h3>
        <ul>
            <li>
                <p><strong>Paso 4: Realizar Peticiones API:</strong> Igual que antes, usa el access_token en el header
                    Authorization: Bearer &lt;ACCESS_TOKEN&gt;.</p>
            </li>
            <li>
                <p><strong>Paso 5: Manejo de Expiraci√≥n del Token:</strong> Cuando el access_token expire, repite los
                    Pasos 2 y
                    3 (construir nuevo JWT, firmarlo y solicitar nuevo token).</p>
            </li>
        </ul>
        <hr>
        <h3 id="‚úÖ-ventajas-de-usar-clave-p√∫blicaprivada-jwt-assertion">‚úÖ Ventajas de Usar Clave P√∫blica/Privada (JWT
            Assertion)</h3>
        <ul>
            <li>
                <p><strong>Mayor Seguridad:</strong> La clave privada nunca sale de tu servidor. No se transmite un
                    Client
                    Secret por la red que podr√≠a ser interceptado.</p>
            </li>
            <li>
                <p><strong>Est√°ndar de la Industria:</strong> Es una pr√°ctica recomendada para la autenticaci√≥n de
                    clientes M2M.
                </p>
            </li>
        </ul>
        <h3 id="üïí-¬øcu√°ndo-se-registra-la-clave-p√∫blica">üïí ¬øCu√°ndo se registra la clave p√∫blica?</h3>
        <p>Se registra <strong>durante la configuraci√≥n del Registro de Integraci√≥n en NetSuite (Paso 1.2
                anterior)</strong>, cuando seleccionas PRIVATE KEY JWT (o similar) como m√©todo de autenticaci√≥n del
            endpoint de
            token. Es en ese momento que subes o pegas el contenido de tu archivo public_key.pem.</p>
        <p>Este m√©todo es m√°s complejo de implementar que el simple Client Secret, pero ofrece una postura de seguridad
            m√°s
            robusta.</p>
    </div>
</body>

</html>